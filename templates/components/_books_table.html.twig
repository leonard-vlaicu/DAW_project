{% set show_admin_actions = show_admin_actions|default(false) %}
{% set show_user_actions = show_user_actions|default(false) %}
{% set is_regular_user = app.user and not is_granted('ROLE_ADMIN') %}


<div class="mt-5 rounded-box border border-base-content/5 bg-base-200">
    <table class="table">
        <!-- head -->
        <thead>
        <tr>
            <th>ID</th>
            <th>Title</th>
            <th>Author(s)</th>
            <th>Pages</th>
            <th>Genre(s)</th>
            <th>Copies</th>
            <th>ISBN</th>
            {% if show_admin_actions %}
                <th></th>
                <th></th>
            {% elseif show_user_actions %}
                <th></th>
            {% endif %}
        </tr>
        </thead>

        <tbody>
        {% for book in books %}
            <tr class="hover:bg-base-100 transition duration-200 ease-in-out">
                <th>{{ book.id }}</th>
                <th>{{ book.title }}</th>
                <th>
                    {% for author in book.authors %}
                        <span class="badge bg-base-content text-black mr-2">
                            {{ author.firstName }} {{ author.lastName }}
                        </span>
                    {% endfor %}
                </th>
                <th>{{ book.pages }}</th>
                <th>
                    {% for genre in book.genres %}
                        <span class="badge badge-accent mr-2">
                            {{ genre.name }}
                        </span>
                    {% endfor %}
                </th>
                <th>{{ book.copies }}</th>
                <th>{{ book.isbn }}</th>
                {% if show_admin_actions %}
                    <th>
                        <a href="{{ path('app_admin_books_edit', {'id': book.id}) }}">
                            <button class="btn btn-secondary">Edit</button>
                        </a>
                    </th>
                    <th>
                        <a href="{{ path('app_admin_books_delete', {'id': book.id}) }}">
                            <button class="btn btn-error">Delete</button>
                        </a>
                    </th>
                {% elseif show_user_actions and is_regular_user %}
                    <th>
                        <a href="{{ path('app_booking_create', {'id': book.id}) }}">
                            <button class="btn btn-primary">Book</button>
                        </a>
                    </th>
                {% endif %}
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
